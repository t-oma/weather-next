:root {
    --backcolor: var(--primary);
    --backcolor-100: var(--primary-100);
}

@theme inline {
    --color-backcolor: var(--backcolor);
    --color-backcolor-100: var(--backcolor-100);
}

/* Clear */
[data-weather="clear"][data-time="day"] {
    --backcolor-100: oklch(0.95 0.05 220);
    --backcolor: oklch(0.8 0.12 230);
}
[data-weather="clear"][data-time="night"] {
    --backcolor-100: var(--base-600);
    --backcolor: var(--base-700);
}

/* Clouds / Overcast */
[data-weather="clouds"] {
    --backcolor-100: oklch(0.9 0.02 240);
    --backcolor: oklch(0.6 0.02 240);
}

/* Fog / Mist */
[data-weather="fog"] {
    --backcolor-100: oklch(0.93 0.01 240);
    --backcolor: oklch(0.75 0.01 240);
}

/* Rain — інтенсивність впливає на контраст */
[data-weather="rain"][data-intensity="light"] {
    --backcolor-100: oklch(0.85 0.02 240);
    --backcolor: oklch(0.55 0.02 240);
}
[data-weather="rain"][data-intensity="moderate"],
[data-weather="rain"][data-intensity="heavy"] {
    --backcolor-100: oklch(0.7 0.02 240);
    --backcolor: oklch(0.4 0.02 240);
}

/* Snow */
[data-weather="snow"] {
    --backcolor-100: oklch(0.98 0.01 240);
    --backcolor: oklch(0.9 0.01 240);
}

/* Thunder */
[data-weather="thunder"],
[data-weather="thunder_rain"],
[data-weather="thunder_snow"] {
    --backcolor-100: oklch(0.2 0.03 260);
    --backcolor: oklch(0.1 0.02 255);
}

@layer base {
    body {
        @apply from-backcolor-100 to-backcolor;
    }
}

body {
    position: relative;
    isolation: isolate;
    overflow: hidden;
}

.rain {
    position: absolute;
    inset: 0;
    z-index: 2;
}
.rain.back-row {
    z-index: 1;
    opacity: 0.5;
    bottom: 60px;
}
.drop {
    position: absolute;
    bottom: 100%;
    width: 15px;
    height: 120px;
    pointer-events: none;
    animation: drop 0.7s linear infinite;
    will-change: transform, opacity;
}
@keyframes drop {
    0% {
        transform: translateY(0vh);
    }
    75% {
        transform: translateY(110vh);
    }
    100% {
        transform: translateY(110vh);
    }
}
.stem {
    width: 1px;
    height: 60%;
    margin-left: 7px;
    background: linear-gradient(
        to bottom,
        transparent,
        rgba(255, 255, 255, 0.25)
    );
    animation: stem 0.6s linear infinite;
}
@keyframes stem {
    0%,
    65% {
        opacity: 1;
    }
    75%,
    100% {
        opacity: 0;
    }
}
.splat {
    width: 15px;
    height: 10px;
    border-top: 2px dotted rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    transform: scale(0);
    opacity: 0;
    animation: splat 0.6s linear infinite;
}
@keyframes splat {
    0%,
    80% {
        opacity: 0;
        transform: scale(0);
    }
    90% {
        opacity: 0.6;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(1.5);
    }
}

@media (prefers-reduced-motion: reduce) {
    .drop,
    .stem,
    .splat {
        animation: none !important;
    }
}
